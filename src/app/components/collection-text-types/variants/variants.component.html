@let list = variants();

@if (list === null) {
  <ion-spinner class="loading" name="crescent"></ion-spinner>
} @else {
  @let text = text$ | async;
  @let varList = list ?? [];
  @let varCount = varList.length;
  @let viewOptions = viewOptionsService.show();
  @let showVariantType = viewOptionsService.selectedVariationType();

  @if (text && varCount) {
    <div class="text-select-wrapper">
      <div class="tsw-text-title" [innerHTML]="selectedVariant()?.name"></div>
      @if (varCount > 1 || showOpenLegendButton) {
        <div class="flex-buttons">
          @if (varCount > 1) {
            <ion-button class="custom-button"
                  (click)="selectVariant()"
                  i18n="@@Variants.ChangeVariant"
            >Byt variant</ion-button>
            <ion-button class="custom-outline-button"
                  fill="outline"
                  (click)="selectVariantForNewView()"
                  i18n="@@Variants.OpenNewVariant"
            >Öppna ny variant</ion-button>
          }
          @if (showOpenLegendButton) {
            <ion-button class="circular-icon-button align-right"
                  fill="outline"
                  slot="icon-only"
                  (click)="openNewLegend($event)"
                  title="Teckenförklaringar"
                  i18n-title="@@Legend.Legend"
            >
              <ion-icon name="help-outline"></ion-icon>
            </ion-button>
          }
        </div>
      }
    </div>
  }

  <div class="tei teiContainer teiVariant"
        [class.show_pageBreakOriginal]="viewOptions.pageBreakOriginal"
        [class.show-variations-all]="showVariantType === 'all'"
        [class.show-variations-sub]="showVariantType === 'sub'"
        [class.show-variations-none]="showVariantType === 'none'"
        [innerHTML]="text | trustHtml"
  ></div>
}
